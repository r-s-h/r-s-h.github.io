<html>
<head>
    <style>
     .mini_container {
         border: 1px #999 solid;
     }
     .mini {
         -webkit-print-color-adjust: exact !important;
         color-adjust: exact !important;
         background-color: #ffffff;
         padding: 0.1in;
         padding-top: 0.2in;
         padding-bottom: 0.2in;
     }
     .size1 img {
         width: 1.5in;
         height: 1.5in;
     }
     .size2 img {
         width: 3in;
         height: 3in;
     }
     .flip {
         transform: scaleY(-1);
         -webkit-transform: scaleY(-1);
         border-top: 1px dashed #999999;
     }
     @media print {
         .dontprint {
            display: none;
         }
     }
    </style>
</head>
<body>
    <div class="dontprint" id='batch1'>
        <input type="file"  accept="image/*" name="image" id="file"  onchange="loadFile(event); setVisible(event,1)" ><br>
        long side (in)<input type="text"  value="2" id="longside" onkeyup="calcDimensions(event)"> 
        bgcolor<input type="text"  value="#feb236" id="bgcolor" onkeyup="setColors(event)">
        padding v<input type="text"  value="0.1" id="padding-v" onkeyup="setColors(event)">
        padding h<input type="text"  value="0.1" id="padding-h" onkeyup="setColors(event)">
        <input type="button" value="0" onclick="setVisible(event,0)" \>
        <input type="button" value="1" onclick="setVisible(event,1)" \>
        <input type="button" value="2" onclick="setVisible(event,2)" \>
        <input type="button" value="3" onclick="setVisible(event,3)" \>
        <input type="button" value="4" onclick="setVisible(event,4)" \>
    </div>


    <div class="dontprint" id='batch2'>
        <input type="file"  accept="image/*" name="image" id="file"  onchange="loadFile(event); setVisible(event,1)" ><br>
        long side (in)<input type="text"  value="2" id="longside" onkeyup="calcDimensions(event)"> 
        bgcolor<input type="text"  value="#feb236" id="bgcolor" onkeyup="setColors(event)">
        padding v<input type="text"  value="0.1" id="padding-v" onkeyup="setColors(event)">
        padding h<input type="text"  value="0.1" id="padding-h" onkeyup="setColors(event)">
        <input type="button" value="0" onclick="setVisible(event,0)" \>
        <input type="button" value="1" onclick="setVisible(event,1)" \>
        <input type="button" value="2" onclick="setVisible(event,2)" \>
        <input type="button" value="3" onclick="setVisible(event,3)" \>
        <input type="button" value="4" onclick="setVisible(event,4)" \>
    </div>


    <div class="dontprint" id='batch3'>
        <input type="file"  accept="image/*" name="image" id="file"  onchange="loadFile(event); setVisible(event,1)" ><br>
        long side (in)<input type="text"  value="2" id="longside" onkeyup="calcDimensions(event)"> 
        bgcolor<input type="text"  value="#feb236" id="bgcolor" onkeyup="setColors(event)">
        padding v<input type="text"  value="0.1" id="padding-v" onkeyup="setColors(event)">
        padding h<input type="text"  value="0.1" id="padding-h" onkeyup="setColors(event)">
        <input type="button" value="0" onclick="setVisible(event,0)" \>
        <input type="button" value="1" onclick="setVisible(event,1)" \>
        <input type="button" value="2" onclick="setVisible(event,2)" \>
        <input type="button" value="3" onclick="setVisible(event,3)" \>
        <input type="button" value="4" onclick="setVisible(event,4)" \>
    </div>

    <div class="dontprint" id='batch4'>
        <input type="file"  accept="image/*" name="image" id="file"  onchange="loadFile(event); setVisible(event,1)" ><br>
        long side (in)<input type="text"  value="2" id="longside" onkeyup="calcDimensions(event)"> 
        bgcolor<input type="text"  value="#feb236" id="bgcolor" onkeyup="setColors(event)">
        padding v<input type="text"  value="0.1" id="padding-v" onkeyup="setColors(event)">
        padding h<input type="text"  value="0.1" id="padding-h" onkeyup="setColors(event)">
        <input type="button" value="0" onclick="setVisible(event,0)" \>
        <input type="button" value="1" onclick="setVisible(event,1)" \>
        <input type="button" value="2" onclick="setVisible(event,2)" \>
        <input type="button" value="3" onclick="setVisible(event,3)" \>
        <input type="button" value="4" onclick="setVisible(event,4)" \>
    </div>

        <table class='batch1'><tr>
    <td class='mini_container size1 c0'>
            <img id="output" src='test_image.png' class='mini flip' \><br>
            <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c1'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c2'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c3'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    </tr></table>


        <table class='batch2'><tr>
    <td class='mini_container size1 c0'>
            <img id="output" src='test_image.png' class='mini flip' \><br>
            <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c1'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c2'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c3'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    </tr></table>


        <table class='batch3'><tr>
    <td class='mini_container size1 c0'>
            <img id="output" src='test_image.png' class='mini flip' \><br>
            <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c1'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c2'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c3'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    </tr></table>


        <table class='batch4'><tr>
    <td class='mini_container size1 c0'>
            <img id="output" src='test_image.png' class='mini flip' \><br>
            <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c1'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c2'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    <td class='mini_container size1 c3'>
              <img id="output" src='test_image.png' class='mini flip' \><br>
              <img src='test_image.png' class='mini' \>
    </td>
    </tr></table>



        <script>
         function setVisible(event,num) {
            for(var i =0; i<4; i++)
            {
                id = event.target.parentElement.id
                selector = '.'+id + ' .c'+i
                var cont = document.querySelector(selector);
                cont.style.display = "none";
                if(i<num) cont.style.display = 'table-cell';
            }
         }
         // TODO: maybe don't duplicate IDs, lol
         function calcDimensionsForImage(img) {
             var longside = document.querySelector('#'+id+ ' #longside').value;
             var destWidth = longside;
             var destHeight = longside;
             if(img.naturalWidth > img.naturalHeight) {
                 destHeight = destWidth * (img.naturalHeight/img.naturalWidth);
             }
             else {
                 destWidth = destHeight * (img.naturalWidth/img.naturalHeight);
             }
             img.style.width = destWidth +"in";
             img.style.height = destHeight +"in";
         }
         var calcDimensions = function(event) {
                id = event.target.parentElement.id
                var images = document.querySelectorAll('.'+id+' .mini');
             for(image of images) {
                 calcDimensionsForImage(image);
             }
         }
         var setColors = function(event) {
                id = event.target.parentElement.id
                var images = document.querySelectorAll('.'+id+' .mini');
             for(image of images) {
                image.style.backgroundColor = document.querySelector('#'+id+ ' #bgcolor').value;
                image.style.paddingTop = document.querySelector('#'+id+ ' #padding-v').value;
                image.style.paddingBottom = document.querySelector('#'+id+ ' #padding-v').value;

                image.style.paddingLeft = document.querySelector('#'+id+ ' #padding-h').value;
                image.style.paddingRight = document.querySelector('#'+id+ ' #padding-h').value;
             }
         }
         var loadFile = function(event) {
                id = event.target.parentElement.id
                var images = document.querySelectorAll('.'+id+' .mini');
             for(image of images) {
                image.src = URL.createObjectURL(event.target.files[0]);
                 image.onload = function() {
                     calcDimensionsForImage(this);
                 }
             }
         };
         window.onload = (function() {
                var tds = document.querySelectorAll('.mini_container');
                for(td of tds)
                {
                    td.style.display = "none";
                }

         })
        </script>

</body>
</html>
